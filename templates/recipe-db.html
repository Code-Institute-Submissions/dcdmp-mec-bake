{% extends 'base.html' %}

    {% block head %}
    {% endblock %}

    {% block title %}
    Recipe Database
    {% endblock %}

    {% block navback %}
    <li><a href="#" onclick="history.go(-1)" class="left"><i class="material-icons">arrow_back</i></a></li>
    {% endblock %}

    {% block mainhead %}

    <div class="row db-row">
        <div class="bread-head col s5 m10 offset-m1 l8 offset-l2">
            <h4 class="page-head">Recipes</h4>
        </div>
        <ul id="dropdowntype" class="dropdown-content td-drop">
            {% for type in recipe_type %}
                {% if rdiff is defined %}
                    {% if type.rec_type == '0' %}
                    <li><a href="{{ url_for('recipe_db_t_d', type_r=type.rec_type, diff_r=rdiff.rec_diff) }}">All</a></li>
                    {% else %}
                    <li><a href="{{ url_for('recipe_db_t_d', type_r=type.rec_type, diff_r=rdiff.rec_diff) }}">{{type.rec_type}}</a></li>
                    {% endif %}
                {% else %}
                    {% if type.rec_type == '0' %}
                    {% else %}
                    <li><a href="{{ url_for('recipe_db_t_d', type_r=type.rec_type, diff_r='0') }}">{{type.rec_type}}</a></li>
                    {% endif %}
                {% endif %}
            {% endfor %}
        </ul>
        <ul id="dropdowndiff" class="dropdown-content td-drop">
            {% for diff in recipe_diff %}
                {% if rtype is defined %}
                    {% if diff.rec_diff == '0' %}
                    <li><a href="{{ url_for('recipe_db_t_d', type_r=rtype.rec_type, diff_r=diff.rec_diff) }}">All</a></li>
                    {% else %}
                    <li><a href="{{ url_for('recipe_db_t_d', type_r=rtype.rec_type, diff_r=diff.rec_diff) }}">{{diff.rec_diff}}</a></li>
                    {% endif %}
                {% else %}
                    {% if diff.rec_diff == '0' %}
                    {% else %}
                    <li><a href="{{ url_for('recipe_db_t_d', type_r='0', diff_r=diff.rec_diff) }}">{{diff.rec_diff}}</a></li>
                    {% endif %}
                {% endif %}
            {% endfor %}
        </ul>
        <div class="button-container">
            <a class="dropdown-button td-btn btn col hide-on-med-and-down" href="#!" data-activates="dropdowntype">Type<i class="material-icons right">arrow_drop_down</i></a>
            <a class="dropdown-button td-btn right btn col s6" href="#!" data-activates="dropdowndiff">Difficulty<i class="material-icons right">arrow_drop_down</i></a>
        </div>
    </div>

    {% endblock %}

    {% block content %}

    <div class="row">
        <ul class="collapsible" data-collapsible="accordion">

        {% for rec in recipe %}
            {% if rtype and rdiff is defined %}

                {% if rtype.rec_type == '0' and rec.rec_diff == rdiff.rec_diff %}
                    <li>
                        <div class="collapsible-header">
                            <div class="col s3">
                                <i class="material-icons">expand_more</i>
                                <a href="{{ url_for('update_recipe', recipe_id=rec._id)}}" class="waves-effect waves-light btn btn_small blue">Edit</a>
                                <a href="{{ url_for('delete_recipe', recipe_id=rec._id)}}" class="waves-effect waves-light btn btn_small blue">Delete Recipe</a>
                            </div>
                            <div class="col s9">
                                <a href="{{ url_for('recipe_view', recipe_id=rec._id)}}"><strong>{{rec.rec_name}}</strong></a>
                            </div>
                        </div>
                        <div class="collapsible-body">
                            <span>{{rec.rec_diff}}</span>
                            <span>{{rec.rec_type}}</span>
                            <span>{{rec.rec_time_h}}</span>
                            <span>{{rec.rec_time_m}}</span>
                        </div>
                    </li>

                {% elif rdiff.rec_diff == '0' and rec.rec_type == rtype.rec_type %}
                    <li>
                        <div class="collapsible-header">
                            <div class="col s3">
                                <i class="material-icons">expand_more</i>
                                <a href="{{ url_for('update_recipe', recipe_id=rec._id)}}" class="waves-effect waves-light btn btn_small blue">Edit</a>
                                <a href="{{ url_for('delete_recipe', recipe_id=rec._id)}}" class="waves-effect waves-light btn btn_small blue">Delete Recipe</a>
                            </div>
                            <div class="col s9">
                                <a href="{{ url_for('recipe_view', recipe_id=rec._id)}}"><strong>{{rec.rec_name}}</strong></a>
                            </div>
                        </div>
                        <div class="collapsible-body">
                            <span>{{rec.rec_diff}}</span>
                            <span>{{rec.rec_type}}</span>
                            <span>{{rec.rec_time_h}}</span>
                            <span>{{rec.rec_time_m}}</span>
                        </div>
                    </li>

                {% elif rec.rec_type == rtype.rec_type and rec.rec_diff == rdiff.rec_diff %}
                    <li>
                        <div class="collapsible-header">
                            <div class="col s3">
                                <i class="material-icons">expand_more</i>
                                <a href="{{ url_for('update_recipe', recipe_id=rec._id)}}" class="waves-effect waves-light btn btn_small blue">Edit</a>
                                <a href="{{ url_for('delete_recipe', recipe_id=rec._id)}}" class="waves-effect waves-light btn btn_small blue">Delete Recipe</a>
                            </div>
                            <div class="col s9">
                                <a href="{{ url_for('recipe_view', recipe_id=rec._id)}}"><strong>{{rec.rec_name}}</strong></a>
                            </div>
                        </div>
                        <div class="collapsible-body">
                            <span>{{rec.rec_diff}}</span>
                            <span>{{rec.rec_type}}</span>
                            <span>{{rec.rec_time_h}}</span>
                            <span>{{rec.rec_time_m}}</span>
                        </div>
                    </li>

                {% endif %}

            {% else %}
                <li>
                    <div class="collapsible-header">
                        <div class="col s3">
                            <i class="material-icons">expand_more</i>
                            <a href="{{ url_for('update_recipe', recipe_id=rec._id)}}" class="waves-effect waves-light btn btn_small blue">Edit</a>
                            <a href="{{ url_for('delete_recipe', recipe_id=rec._id)}}" class="waves-effect waves-light btn btn_small blue">Delete Recipe</a>
                        </div>
                        <div class="col s9">
                            <a href="{{ url_for('recipe_view', recipe_id=rec._id)}}"><strong>{{rec.rec_name}}</strong></a>
                        </div>
                    </div>
                    <div class="collapsible-body">
                        <span>{{rec.rec_diff}}</span>
                        <span>{{rec.rec_type}}</span>
                        <span>{{rec.rec_time_h}}</span>
                        <span>{{rec.rec_time_m}}</span>
                    </div>
                </li>
            {% endif %}
        {% endfor %}

        </ul>
    </div>

    {% endblock %}
